<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Family - All Seasons</title>
    <style>
        :root { --primary-red: #e50914; --background-dark: #141414; --card-dark: #181818; --text-light: #fff; --text-grey: #a0a0a0; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: var(--background-dark); color: var(--text-light); }
        .navbar { display: flex; justify-content: space-between; align-items: center; background: linear-gradient(to bottom, rgba(0,0,0,0.7) 10%, rgba(0,0,0,0)); padding: 20px 50px; color: white; width: 100%; position: fixed; top: 0; z-index: 1001; transition: background-color 0.4s; }
        .navbar.scrolled { background-color: var(--background-dark); }
        .navbar-logo img {
            height: 35px;
            width: auto;
            vertical-align: middle;
        }
        .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .navbar .welcome { font-weight: bold; }
        .navbar .hamburger { position: relative; display: inline-block; }
        .navbar .hamburger img { width: 35px; height: 35px; cursor: pointer; border-radius: 4px; }
        .dropdown-content { display: none; position: absolute; right: 0; background-color: rgba(0, 0, 0, 0.9); min-width: 180px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1; border: 1px solid rgba(255,255,255,0.15); }
        .dropdown-content a { color: var(--text-grey); padding: 12px 16px; text-decoration: none; display: block; font-size: 0.9em; }
        .dropdown-content a:hover { background-color: rgba(255,255,255,0.1); color: var(--text-light); }
        .hamburger:hover .dropdown-content { display: block; }
        .hero-container { min-height: 95vh; width: 100%; position: relative; background-image: linear-gradient(to right, rgba(20, 20, 20, 1) 25%, rgba(20, 20, 20, 0.6) 50%, rgba(20, 20, 20, 0) 100%), linear-gradient(to top, var(--background-dark) 5%, rgba(20, 20, 20, 0) 25%), url('modern-family-dvd-poster-cover-qlhbavon5k0kmbhn.jpg'); background-size: cover; background-position: center top; display: flex; flex-direction: column; justify-content: center; padding: 100px 50px 50px 50px; }
        .hero-text-content { max-width: 55%; z-index: 10; }
        .hero-text-content .logo { width: 450px; margin-bottom: 20px; }
        #series-title { font-size: 2.8em; margin-bottom: 20px; }
        .hero-text-content .meta-info { color: var(--text-grey); margin-bottom: 20px; font-size: 1.1em; }
        .hero-text-content p { font-size: 1.2em; line-height: 1.5; margin-bottom: 25px; max-width: 600px; }
        .hero-buttons button { padding: 12px 25px; font-size: 1.1em; border-radius: 5px; border: none; margin-right: 15px; cursor: pointer; font-weight: bold; display: inline-flex; align-items: center; justify-content: center; }
        .btn-play { background-color: var(--text-light); color: var(--background-dark); }
        .btn-play:hover { background-color: rgba(255,255,255,0.75); }
        .btn-info { background-color: rgba(109,109,110,0.7); color: var(--text-light); }
        .btn-info:hover { background-color: rgba(109,109,110,0.4); }
        .main-content { padding: 20px 50px; position: relative; z-index: 12; background-color: var(--background-dark); }
        .season-selector-row h3 { font-size: 1.6em; font-weight: bold; display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .season-selector, .search-bar { padding: 10px; font-size: 1.1em; border-radius: 5px; border: 1px solid #333; background-color: var(--background-dark); color: var(--text-light); }
        .filter-controls { display: flex; gap: 20px; align-items: center; flex-wrap: wrap; }
        .episodes-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; width: 100%; margin-top: 20px; }
        .episode { background-color: var(--card-dark); border-radius: 5px; overflow: hidden; transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out; cursor: pointer; position: relative; }
        .episode:hover { transform: scale(1.08); z-index: 20; box-shadow: 0 10px 30px rgba(0,0,0,0.7); }
        .episode .image-container { width: 100%; padding-top: 56.25%; position: relative; background-color: #000; }
        .episode img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 4em; color: rgba(255,255,255,0.8); opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .episode:hover .play-icon { opacity: 1; }
        .episode-info { padding: 15px; }
        .episode .title { font-weight: bold; font-size: 1.1em; color: var(--text-light); margin-bottom: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .episode .synopsis { font-size: 0.9em; color: var(--text-grey); line-height: 1.4; height: 3.8em; overflow: hidden; }
        .episode .rating { font-weight: bold; color: #46d369; margin-top: 10px; font-size: 0.9em; }
        .top-rated-badge { position: absolute; top: 10px; left: 10px; background-color: var(--primary-red); color: #fff; padding: 5px 10px; border-radius: 5px; font-weight: bold; z-index: 5; font-size: 0.8em; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.85); align-items: center; justify-content: center; }
        .modal-content { background-color: var(--card-dark); margin: auto; padding: 0; width: 90%; max-width: 900px; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.7); position: relative; overflow: hidden; }
        .modal-video-container { position: relative; background-color: #000; cursor: pointer; }
        #modal-video { width: 100%; height: auto; display: block; }
        .close { color: var(--text-light); position: absolute; top: 15px; right: 20px; font-size: 35px; font-weight: bold; background-color: rgba(20,20,20,0.7); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; line-height: 1; z-index: 100; cursor: pointer; transition: background-color 0.2s; }
        .close:hover, .close:focus { background-color: #333; }
        .modal-info { padding: 25px 30px; }
        #modal-title { font-size: 1.8em; margin-bottom: 15px; }
        #modal-synopsis { color: var(--text-grey); margin-bottom: 15px; line-height: 1.6; }
        #modal-rating { font-weight: bold; }
        
        .video-overlay-controls { position: absolute; top: 0; left: 0; right: 0; bottom: 60px; z-index: 21; }
        .click-zone { position: absolute; top: 0; height: 100%; z-index: 22; }
        .click-zone.left { left: 0; width: 30%; }
        .click-zone.center { left: 30%; width: 40%; }
        .click-zone.right { right: 0; width: 30%; }
        
        .edge-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(20,20,20,0.8); color: #fff; padding: 10px 15px; border-radius: 5px; font-weight: bold; font-size: 1.1em; opacity: 0; transition: opacity 0.3s; z-index: 23; pointer-events: none; }
        .video-overlay-controls:hover .edge-nav { opacity: 1; }
        .edge-nav.prev { left: 20px; }
        .edge-nav.next { right: 20px; }
        .edge-nav.disabled { display: none !important; }

        #next-episode-prompt { display: none; position: absolute; bottom: 80px; right: 20px; z-index: 100; background-color: rgba(20, 20, 20, 0.9); color: white; border: 1px solid rgba(255, 255, 255, 0.5); padding: 12px 25px; border-radius: 5px; font-size: 1em; cursor: pointer; transition: all 0.3s; }
        #next-episode-prompt:hover { background-color: var(--primary-red); border-color: var(--primary-red); transform: scale(1.05); }

        footer { text-align: center; color: var(--text-grey); margin-top: 50px; padding-bottom: 20px; }
        @media (max-width: 768px) { .navbar { padding: 15px 20px; } .hero-container { padding: 80px 20px 40px 20px; min-height: 80vh; } .hero-text-content { max-width: 95%; } .hero-text-content .logo { width: 200px; } #series-title {font-size: 2em;} .main-content { padding: 20px; } .episodes-grid { grid-template-columns: 1fr; } .modal-content { width: 95%; } #next-episode-prompt { bottom: 70px; right: 10px; padding: 10px 15px; font-size: 0.9em; } .edge-nav { font-size: 0.9em; padding: 8px 10px; } }
    </style>
</head>

<body>
    <audio id="hover-sound" src="ui-pop-sound-316482.mp3" preload="auto"></audio>

    <div class="navbar" id="navbar">
        <a href="netflix.html" class="navbar-logo"><img src="netflix-mobile-application-logo-free-png.webp" alt="Site Logo"></a>
        <div class="navbar-right">
            <div class="welcome">Welcome, Vishal R</div>
            <div class="hamburger">
                <img src="download.png" alt="Menu">
                <div class="dropdown-content">
                    <a href="profile.html">Profile</a>
                    <a href="logout.html">Logout</a>
                    <a href="home.html">Home</a>
                    <a href="GALLERY.HTML">Stream</a>
                    <a href="about.html">About</a>

                </div>
            </div>
        </div>
    </div>

    <div class="hero-container">
        <div class="hero-text-content">
            <img src="modern-family-logo-A3711BC6FA-seeklogo.com.png" alt="Modern Family Logo" class="logo">
            <h1 id="series-title">Modern Family</h1>
            <div class="meta-info">2009 | Maturity Rating: U/A 13+ | 11 Seasons | Sitcom</div>
            <p>Follow the daily lives of three diverse family setups in this hilarious and heartfelt mockumentary-style sitcom.</p>
            <div class="hero-buttons">
                <button class="btn-play">▶ Play</button>
                <button class="btn-info">ⓘ More Info</button>
            </div>
        </div>
    </div>
    
    <div class="main-content">
        <div class="season-selector-row">
            <h3>Episodes</h3>
            <div class="filter-controls">
                <select id="season-select" class="season-selector">
                    <option value="all">All Seasons</option>
                    <option value="S01" selected>Season 1</option>
                    <option value="S02">Season 2</option>
                    <option value="S03">Season 3</option>
                    <option value="S04">Season 4</option>
                    <option value="S05">Season 5</option>
                    <option value="S06">Season 6</option>
                    <option value="S07">Season 7</option>
                    <option value="S08">Season 8</option>
                    <option value="S09">Season 9</option>
                    <option value="S10">Season 10</option>
                    <option value="S11">Season 11</option>
                </select>
                <input type="text" id="search-bar" class="search-bar" placeholder="Search episodes...">
            </div>
        </div>
        <div id="episodes-container" class="episodes-grid">
            <!-- Episodes will be dynamically added here -->
        </div>
    </div>

    <footer>
        <p>© 2024 VR1 Site. All rights reserved.</p>
    </footer>

    <div id="episode-modal" class="modal">
        <div class="modal-content" id="modal-content">
            <span class="close">×</span>
            <div class="modal-video-container" id="modal-video-container">
                <video id="modal-video" controls>
                    <source id="modal-video-source" src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="video-overlay-controls" id="video-overlay-controls">
                    <div class="click-zone left"></div>
                    <div class="click-zone center"></div>
                    <div class="click-zone right"></div>
                    <div class="edge-nav prev" id="prev-episode-btn">« Previous Episode</div>
                    <div class="edge-nav next" id="next-episode-btn">Next Episode »</div>
                </div>
                <button id="next-episode-prompt">Wanna jump to next episode?</button>
            </div>
            <div class="modal-info">
                <h2 id="modal-title">Episode Title</h2>
                <p id="modal-synopsis">Episode Synopsis</p>
                <p id="modal-rating">IMDB Rating: <span id="modal-rating-value"></span></p>
            </div>
        </div>
    </div>

    <script>        // Data array with links VERIFIED and CORRECTED against the provided reference file.
        const allEpisodes = [{"season":"S01","img":"Modern Family/videoframe_1311038.png","title":"S01E01 - Pilot","synopsis":"Jay must adapt to his young new wife, Gloria and her son. Meanwhile, Claire deals with her own family. Mitchell and Cam decide to adopt a baby.","rating":"8.5/10","link":"Modern Family/Modern Family S01E01 Pilot  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_313726.png","title":"S01E03 - The Bicycle Thief","synopsis":"After buying a new bike for his son, Phil ends up lying when it gets stolen. Jay tries bonding with Manny. Cam and Mitchell begin daycare classes for Lily.","rating":"8.3/10","link":"Modern Family/Modern.Family.S01E03.mp4"},{"season":"S01","img":"Modern Family/videoframe_428416.png","title":"S01E03 - Come Fly with Me","synopsis":"Jay takes Phil on a model-airplane excursion with disastrous results. While Manny is at their house, Claire must get used to the fact they are actually siblings.","rating":"8.3/10","link":"Modern Family/Modern Family S01E03 Come Fly with Me  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_63901.png","title":"S01E04 - The Incident","synopsis":"Jay's ex-wife shows up for the first time following a nasty incident at Gloria and Jay's wedding.","rating":"8.2/10","link":"Modern Family/Modern Family S01E04 The Incident  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_241359.png","title":"S01E05 - Coal Digger","synopsis":"A conflict between Manny and Luke spreads to their respective parents during a football game.","rating":"8.0/10","link":"Modern Family/Modern Family S01E05 Coal Digger  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_1163627.png","title":"S01E06 - Run for Your Wife","synopsis":"Claire and Phil have mixed feelings regarding the first day of school for the kids. Jay and Gloria argue about an outfit for Manny, and a minor problem with Lily gets blown out of proportion by Mitchell and Cameron.","rating":"8.1/10","link":"Modern Family/Modern Family S01E06 Run for Your Wife  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_427629.png","title":"S01E09 - Fizbo","synopsis":"Cameron breaks out his favorite clown costume to make Luke's birthday party a hit. However, a series of accidents causes the party to break into chaos and leads to an unfortunate injury.","rating":"8.4/10","link":"Modern Family/Modern Family S01E09 Fizbo  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_541458.png","title":"S01E11 - Up All Night","synopsis":"Manny's dad shows up bearing extravagant gifts, Mitchell and Cameron fight over how to care for their daughter when she cries at night, and Claire tries to impress the firefighters who responded to Phil's kidney stone 911 call.","rating":"8.2/10","link":"Modern Family/Modern Family S01E11 Up All Night  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_81820.png","title":"S01E12 - Not in My House","synopsis":"Gloria plots to get rid of Jay's new dog butler, Cameron's helpful nature gets himself in trouble with Mitchell, and Claire asks Phil to punish their son for looking at nude pictures, not knowing they're Phil's.","rating":"8.1/10","link":"Modern Family/Modern Family 2009 Season 1 Complete 720p BluRay x264 [i_c]/Modern Family S01E12 Not in My House.mkv"},{"season":"S01","img":"Modern Family/videoframe_22109.png","title":"S01E13 - Fifteen Percent","synopsis":"Mitchell tells Jay that one of his friends is gay to teach him a lesson, Claire gets frustrated with Phil's new master remote control, and Gloria gives Manny's date a makeover to improve her self-esteem.","rating":"8.1/10","link":"Modern Family/Modern.Family.S01E13.mp4"},{"season":"S01","img":"Modern Family/videoframe_256826.png","title":"S01E14 - Moon Landing","synopsis":"Claire feels like a loser when she catches up with an old friend from work, Jay and Cameron have an unpleasant encounter in a locker room, and Mitchell tries to give legal advice to Gloria after she has a wreck.","rating":"8.3/10","link":"Modern Family/Modern Family S01E14 Moon Landing  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_121935.png","title":"S01E15 - My Funky Valentine","synopsis":"Jay takes Gloria to see David Brenner. Mitchell and Cameron try to set Manny up on a date. Phil and Claire try to spice things up by going on a romantic getaway.","rating":"8.4/10","link":"Modern Family/Modern.Family.S01E15.mp4"},{"season":"S01","img":"Modern Family/videoframe_72102.png","title":"S01E16 - Fears","synopsis":"The family members confront their personal fears and find surprising support from each other.","rating":"8.4/10","link":"Modern Family/Modern Family 2009 Season 1 Complete 720p BluRay x264 [i_c]/Modern Family S01E16 Fears.mkv"},{"season":"S01","img":"Modern Family/videoframe_93701.png","title":"S01E17 - Truth Be Told","synopsis":"Jay accidentally kills Manny's pet turtle and lies about it, Claire becomes jealous when Phil's ex-girlfriend pays a visit, and Mitchell makes a bold decision after he misses a family day because he's called in to work.","rating":"8.0/10","link":"Modern Family/Modern.Family.S01E17.mp4"},{"season":"S01","img":"Modern Family/videoframe_1030227.png","title":"S01E18 - Starry Night","synopsis":"Jay and Mitchell attempt to bond while watching a meteor shower, but things don't go according to plan. Gloria and Cameron try to find something else to occupy their time. Claire and Phil try to help their kids with their school projects.","rating":"8.1/10","link":"Modern Family/Modern Family S01E18 Starry Night  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_931136.png","title":"S01E19 - Game Changer","synopsis":"Jay takes on Gloria and Manny in the ultimate chess game. Claire goes all out to find a cool new electronic gadget for Phil's birthday gift, and Cameron pokes his nose into a neighbor's affairs.","rating":"8.2/10","link":"Modern Family/Modern Family 2009 Season 1 Complete 720p BluRay x264 [i_c]/Modern Family S01E19 Game Changer.mkv"},{"season":"S01","img":"Modern Family/videoframe_2607.png","title":"S01E22 - Airport 2010","synopsis":"Gloria's birthday present to Jay of a trip to Hawaii becomes a vacation for the entire family.","rating":"8.0/10","link":"Modern Family/Modern Family S01E22 Airport 2010  (1080p x265 10bit Joy).mkv"},{"season":"S01","img":"Modern Family/videoframe_36964.png","title":"S01E23 - Hawaii","synopsis":"Jay's plans to relax in Hawaii are thwarted. Phil tries to make the vacation special for Claire, but this results in the kids being unsupervised. Mitchell and Cameron debate on what to see.","rating":"8.5/10","link":"Modern Family/Modern.Family.S01E23.mp4"},{"season":"S01","img":"Modern Family/videoframe_1216543.png","title":"S01E24 - Family Portrait","synopsis":"Claire goes through great lengths to organize a family portrait. Gloria and Phil have an awkward moment while taking Manny and Alex to a Lakers game. Cameron becomes a wedding singer, and Jay has to help Luke with a school project.","rating":"8.3/10","link":"Modern Family/Modern.Family.S01E24 .mp4"},{"season":"S03","img":"Modern Family/videoframe_1172092.png","title":"S03E03 - Phil on Wire","synopsis":"Phil tries to learn tightrope walking, Haley and Alex wind up in the same math class, Gloria becomes upset over Jay's pampering of the dog, and Mitchell joins Cameron on a juice fast.","rating":"8.5/10","link":"Modern Family/Modern Family S03E03 Phil on Wire  (1080p x265 10bit Joy).mkv"},{"season":"S03","img":"Modern Family/videoframe_1027250.png","title":"S03E16 - Virgin Territory","synopsis":"Alex accidentally reveals a secret about Haley to their dad, Cameron fakes a back injury to catch Claire in a lie, Mitchell confesses a secret about one of Jay's proudest moments, and Luke helps Manny try to impress a girl.","rating":"8.2/10","link":"Modern Family/Modern Family S03E16 Virgin Territory  (1080p x265 10bit Joy).mkv"},{"season":"S03","img":"Modern Family/videoframe_910292.png","title":"S03E17 - Leap Day","synopsis":"Claire, Hayley, and Alex's cycles ruin Phil's big Leap Day plans, Mitchell tries to throw an elaborate party for Cameron's \"tenth\" birthday, and Gloria wants Jay to get in a fight.","rating":"8.4/10","link":"Modern Family/Modern Family S03E17 Leap Day  (1080p x265 10bit Joy).mkv"},{"season":"S03","img":"Modern Family/videoframe_1226892.png","title":"S03E19 - Election Day","synopsis":"It's Claire's election day, and the entire family tries in vain to pitch in to help her win the vote. Meanwhile, Haley anxiously awaits her final chance to get accepted into a college.","rating":"8.3/10","link":"Modern Family/Modern Family S03E19 Election Day  (1080p x265 10bit Joy).mkv"},{"season":"S03","img":"Modern Family/videoframe_651823.png","title":"S03E22 - Disneyland","synopsis":"Visiting the happiest place on earth triggers old memories and creates new ones.","rating":"8.6/10","link":"Modern Family/Modern Family S03E22 Disneyland  (1080p x265 10bit Joy).mkv"}];
        
        // Combine with the rest of the episodes, ensuring no duplicates.
        const otherEpisodes = [{"season":"S02","img":"Modern Family/videoframe_1074228.png","title":"S02E01 - The Old Wagon","synopsis":"The Dunphys get nostalgic when Phil has to get rid of their station wagon. Cameron begs Jay to intervene when Mitchell wants to build Lily a castle, and Manny invites a girl over to study.","rating":"8.2/10","link":"Modern Family/Modern Family S02E01 The Old Wagon.mkv"},{"season":"S02","img":"Modern Family/videoframe_1067385.png","title":"S02E02 - The Kiss","synopsis":"Cameron is upset with Mitchell's lack of public affection, Gloria gets back at Jay for disrespecting her Colombian traditions, and Claire goes overboard as Alex tries to get her first kiss.","rating":"8.2/10","link":"Modern Family/Modern.Family.S02E02.mp4"},{"season":"S02","img":"Modern Family/videoframe_238529.png","title":"S02E03 - Earthquake","synopsis":"When an earthquake hits the area, Claire gets locked in the bathroom with a plumber, Cameron and Mitchell use it as an excuse to get out of brunch with an obnoxious friend, and Manny reevaluates the meaning of life while on a trip with Jay.","rating":"8.3/10","link":"Modern Family/Modern Family 2009 Season 2 Complete 720p BluRay x264 [i_c]/Modern Family S02E03 Earthquake.mkv"},{"season":"S02","img":"Modern Family/videoframe_543903.png","title":"S02E05 - Unplugged","synopsis":"Phil, Claire, and the kids try to improve their communication skills by giving up their electronic devices. Gloria is getting obsessed over a neighbor's barking dog, and Mitchell and Cameron try to find a preschool for Lily.","rating":"8.1/10","link":"Modern Family/Modern.Family.S02E05.mp4"},{"season":"S02","img":"Modern Family/videoframe_897412.png","title":"S02E06 - Halloween","synopsis":"Claire needs the family's help to run Halloween smoothly at their house. Jay and Manny have fun at Gloria's expense, and the holiday brings back painful memories for Cameron.","rating":"8.5/10","link":"Modern Family/Modern.Family.S02E06.mp4"},{"season":"S02","img":"Modern Family/videoframe_222965.png","title":"S02E07 - Chirp","synopsis":"While Claire and Haley get sick at the same time, Phil wages battle against a chirping smoke detector. Manny accidentally gets one of Jay's employees fired, and Cameron wants to put Lily in a TV commercial.","rating":"8.2/10","link":"Modern Family/Modern Family 2009 Season 2 Complete 720p BluRay x264 [i_c]/Modern Family S02E07 Chirp.mkv"},{"season":"S02","img":"Modern Family/videoframe_1094705.png","title":"S02E08 - Manny Get Your Gun","synopsis":"A birthday dinner for Manny at a family restaurant turns into a race for Phil and Claire and a chance for Cameron to socialize at a shopping mall while looking for a gift.","rating":"8.0/10","link":"Modern Family/Modern Family S02E08 Manny Get Your Gun.mkv"},{"season":"S02","img":"Modern Family/videoframe_199900.png","title":"S02E11 - Slow Down Your Neighbors","synopsis":"Claire tries to stop a woman from speeding in the neighborhood, which creates a business conflict for Phil. Meanwhile, Mitchell and Cameron befriend a strange new neighbor, and Gloria and Manny learn how to ride a bicycle.","rating":"8.3/10","link":"Modern Family/Modern.Family.S02E11.mp4"},{"season":"S02","img":"Modern Family/videoframe_943726.png","title":"S02E12 - Our Children, Ourselves","synopsis":"Phil and Claire question their intelligence after a comment by Alex, Mitchell suspects that he fathered a child 8 years ago, and Gloria tells an embarrassing lie about Jay to cover up his rudeness to another couple.","rating":"8.1/10","link":"Modern Family/Modern Family S02E12 Our Children, Ourselves.mkv"},{"season":"S02","img":"Modern Family/videoframe_156156.png","title":"S02E13 - Caught in the Act","synopsis":"Phil and Claire's kids walk in on them having sex while delivering their anniversary present, Gloria tries to keep Claire from seeing an angry e-mail, and Mitchell and Cameron contemplate how to cover up a juice stain on a rug.","rating":"8.8/10","link":"Modern Family/Modern.Family.S02E13.mp4"},{"season":"S02","img":"Modern Family/videoframe_580304.png","title":"S02E14 - Bixby's Back","synopsis":"Phil and Clair try to revisit an old Valentine's Day act, Jay tries to surprise Gloria with a romantic dinner, Mitchell and Cameron disagree over Mitchell's assistant's crush, and Manny gives Haley relationship advice.","rating":"8.2/10","link":"Modern Family/Modern.Family.S02E14.mp4"},{"season":"S02","img":"Modern Family/videoframe_511384.png","title":"S02E16 - Regrets Only","synopsis":"Gloria helps Phil figure out why Claire is mad at him, Mitchell forgets to send out invitations to Cameron's fundraiser, and Alex tries to prove that Haley is lying when she says she has a job as a waitress.","rating":"8.3/10","link":"Modern Family/Modern Family S02E16 Regrets Only.mkv"},{"season":"S02","img":"Modern Family/videoframe_1040875.png","title":"S02E18 - Boys' Night","synopsis":"Phil and Claire have some trepidation when they find out that Luke has befriended their crotchety old neighbor; Jay's attempt to avoid sitting through a symphony concert with Gloria and Manny lands him in the middle of Mitchell and Cameron's \"boy's night out\";.and Haley has her own adventures in babysitting with Lily","rating":"8.2/10","link":"Modern Family/Modern.Family.S02E18.mp4"},{"season":"S02","img":"Modern Family/videoframe_368215.png","title":"S02E19 - The Musical Man","synopsis":"Phil's new real estate ad creates embarrassment for Claire and Haley, Cameron goes over the top while directing a school musical, and Jay's brother comes to town with some surprising news.","rating":"8.0/10","link":"Modern Family/Modern.Family.S02E19.mp4"},{"season":"S02","img":"Modern Family/videoframe_1206285.png","title":"S02E20 - Someone to Watch Over Lily","synopsis":"Mitchell and Cameron try to determine Lily's guardian in case something happens to them, Claire is scared that Luke will turn out like Phil, and Haley bonds with Alex after she is forced to take Alex to cello practice.","rating":"8.1/10","link":"Modern Family/Modern.Family.S02E20.mp4"},{"season":"S02","img":"Modern Family/videoframe_593112.png","title":"S02E21 - Mother's Day","synopsis":"Cameron is upset that Mitchell thinks he's the \"Mom\" of the family, Claire and Gloria take the kids on a disastrous hike, and Phil witnesses Jay tearing up while they prepare Mother's Day dinner.","rating":"8.3/10","link":"Modern Family/Modern.Family.S02E21.mp4"},{"season":"S02","img":"Modern Family/videoframe_878411.png","title":"S02E22 - Good Cop Bad Dog","synopsis":"Phil and Claire trade discipline roles for the day, Gloria forces Jay to listen to a horrible business proposal, and Mitchell tries to convince a sick Cameron to let him go to the Lady Gaga concert without him.","rating":"8.4/10","link":"Modern Family/Modern.Family.S02E22.mp4"},{"season":"S02","img":"Modern Family/videoframe_493606.png","title":"S02E23 - See You Next Fall","synopsis":"Haley tries to convince Alex not to deliver an angry graduation speech, Jay has a botched Botox procedure, and Cameron gets upset with Mitchell because he keeps laughing at his accidents.","rating":"8.5/10","link":"Modern Family/Modern.Family.S02E23.mp4"},{"season":"S02","img":"Modern Family/videoframe_628983.png","title":"S02E24 - The One That Got Away","synopsis":"Jay wants nothing more than to have a quiet birthday out fishing on the lake, but the family take that as him wanting a big celebration, and in their frantic scramble to put everything together, Claire and Mitchell wind up trapped in the yard of their childhood home; Phil runs into his old college nemesis while at the mall with Gloria and Lily; ..","rating":"8.6/10","link":"Modern Family/Modern.Family.S02E24.mp4"},{"season":"S03","img":"Modern Family/videoframe_34781.png","title":"S03E01 - Dude Ranch","synopsis":"The family's dude ranch vacation turns into disaster when Dylan proposes to Haley, Alex gets an unexpected first kiss, their cowboy guide keeps hitting on Gloria, and Phil goes out of his way to impress Jay.","rating":"8.1/10","link":"Modern Family/Modern Family 2009 Season 3 Complete 720p BluRay x264 [i_c]/Modern Family S03E01 Dude Ranch.mkv"},{"season":"S03","img":"Modern Family/videoframe_37626.png","title":"S03E02 - When Good Kids Go Bad","synopsis":"Lily has problems with Mitchell and Cameron's plans to adopt another child, Jay tries to get Manny to confess to stealing a locket at school, and Claire goes to extreme lengths to prove that she was right in an argument.","rating":"8.3/10","link":"Modern Family/Modern.Family.S03E02.mp4"},{"season":"S03","img":"Modern Family/videoframe_95383.png","title":"S03E06 - Go Bullfrogs!","synopsis":"While Phil takes Haley on a tour of his alma mater, Claire goes out on the town with a man she mistakenly assumes is Mitchell and Cameron's gay friend. Meanwhile, Gloria is alarmed and curious about Manny's mail-order package.","rating":"8.1/10","link":"Modern Family/Modern.Family.S03E06.mp4"},{"season":"S03","img":"Modern Family/videoframe_804015.png","title":"S03E08 - After the Fire","synopsis":"As the family collects goods for a family whose house burned down, Jay makes an embarrassing remark to Phil during a massage, Claire is jealous of Mitchell's friendship with Gloria, and Cameron struggles with a moving van in a parking lot.","rating":"8.0/10","link":"Modern Family/Modern.Family.S03E08.mp4"},{"season":"S03","img":"Modern Family/videoframe_67174.png","title":"S03E12 - Egg Drop","synopsis":"While Jay and Claire become hyper-competitive while working on their boys' science project, Gloria tries to help Phil with his real estate seminar. Meanwhile, Cameron and Mitchell interview a potential birth mother.","rating":"8.5/10","link":"Modern Family/Modern Family 2009 Season 3 Complete 720p BluRay x264 [i_c]/Modern Family S03E12 Egg Drop.mkv"},{"season":"S03","img":"Modern Family/videoframe_914514.png","title":"S03E13 - Little Bo Bleep","synopsis":"Claire's family tries to help her prepare for her political debate, Lily begins saying the \"F word\" right before her appearance as a flower girl at a wedding, and Jay begins to wonder if his dog Stella is suicidal.","rating":"8.5/10","link":"Modern Family/Modern.Family.S03E13.mp4"},{"season":"S04","img":"Modern Family/videoframe_1148721.png","title":"S04E02 - Schooled","synopsis":"Phil and Claire get emotional as they send Haley off to school, Manny makes Jay and Gloria take a parenting class, and Mitchell and Cameron clash with lesbian parents from Lily's school.","rating":"8.2/10","link":"Modern Family/Modern.Family.S04E02.mp4"},{"season":"S04","img":"Modern Family/TorrDroid/Modern Family 2009 Season 4 Complete 720p BluRay x264 [i_c]/Modern Family S04E05 Open House of Horrors.jpg","title":"S04E05 - Open House of Horrors","synopsis":"Claire’s toned down Halloween decorations fail to attract kids; Phil hosts an open house; Mitch & Cam’s mismatched costumes cause issues; Lily pressures them about her real mom; Gloria struggles with pregnancy hormones.","rating":"7.9/10","link":"Modern Family/TorrDroid/Modern Family 2009 Season 4 Complete 720p BluRay x264 [i_c]/Modern Family S04E05 Open House of Horrors.mkv"},{"season":"S04","img":"Modern Family/videoframe_544197.png","title":"S04E07 - Arrested","synopsis":"When Haley is arrested for underage drinking, Phil, Claire, and Mitchell must intervene, leaving Cameron in charge of the kids. Jay's ex-wife, DeDe, makes a surprise visit, and he desperately tries to hide Gloria's pregnancy from her.","rating":"8.1/10","link":"Modern Family/Modern.Family.S04E07.mp4"},{"season":"S04","img":"Modern Family/videoframe_557431.png","title":"S04E08 - Mistery Date","synopsis":"While Claire and the kids are away at one of Alex's competitions, one of Cam's friends has a \"date\" with Phil. Meanwhile, Mitchell has a breakthrough with Jay on a shopping trip, and Cameron gets Jay and Gloria a surprise gift.","rating":"8.0/10","link":"Modern Family/Modern.Family.S04E08.mp4"}, {"season": "S04","img": "Modern Family/S4.E9 ∙ When a Tree Falls.jpg","title": "S04E09 - When a Tree Falls","synopsis": "Cameron and Mitchell fight to save a beloved tree. Jay and Phil clash at a kid’s birthday party. Gloria and Claire get in trouble at a supermarket, and Haley does community service while Alex tries to embarrass her.","rating": "7.6/10","link": "Modern Family/Modern Family S04E09 When a Tree Falls.mkv"},{"season":"S04","img":"Modern Family/videoframe_1174873.png","title":"S04E13 - Fulgencio","synopsis":"Jay fights with his mother in law over naming the baby, Phil unsuccessfully tries to solve his kids' problems, and Mitchell and Cameron try to curb Lily's snarkiness.","rating":"8.3/10","link":"Modern Family/Modern.Family.S04E13.mp4"},{"season":"S04","img":"Modern Family/videoframe_273876.png","title":"S04E15 - Heart Broken","synopsis":"Phil and Claire's Valentine's plans land Claire in the emergency room, Jay and Gloria try to be intimate for the first time after the baby, and Mitchell has a wild Valentine's night after drinking and blacking out at his party.","rating":"8.5/10","link":"Modern Family/Modern Family S04E15 Heart Broken.mkv"},{"season":"S04","img":"Modern Family/videoframe_357993.png","title":"S04E17 - Best Men","synopsis":"Mitchell and Cameron are co-best men for a friend's wedding, but the bride has cold feet. Meanwhile, Manny has a crush on the nanny, Phil helps Luke get a date, and Claire and Haley go together to Alex's concert.","rating":"8.3/10","link":"Modern Family/Modern Family 2009 Season 4 Complete 720p BluRay x264 [i_c]/Modern Family S04E17 Best Men.mkv"},{"season":"S05","img":"Modern Family/TorrDroid/Modern Family 2009 Season 5 Complete 720p WEB-DL x264 [i_c]/Modern Family S05E03 Larry's Wife.jpg","title":"S05E03 - Larry's Wife","synopsis":"At a wedding, Mitchell lets Cam plan everything while Cam stages a feline funeral for Lily. Phil tries marketing to divorced women, and Gloria worries their baby is cursed.","rating":"7.5/10","link":"Modern Family/TorrDroid/Modern Family 2009 Season 5 Complete 720p WEB-DL x264 [i_c]/Modern Family S05E03 Larry's Wife.mkv"},{"season":"S05","img":"Modern Family/videoframe_1093189.png","title":"S05E12 - Under Pressure","synopsis":"The parents go to open house at school, Alex sees a therapist, Manny and Luke have a double date with twins, and Mitchell doesn't feel like he's \"green\" enough after speaking to his neighbor.","rating":"8.5/10","link":"Modern Family/Modern.Family.S05E12.mp4"},{"season":"S05","img":"Modern Family/videoframe_315901.png","title":"S05E14 - iSpy","synopsis":"Gloria is suspicious of Jay after he says \"baby\" in a dream, Phil and Claire spy on Haley, Luke and Manny, and Mitchell is reluctant to share some juicy gossip with Cameron..","rating":"8.4/10","link":"Modern Family/Modern.Family.S05E14.mp4"},{"season":"S05","img":"Modern Family/videoframe_1200960.png","title":"S05E18 - Las Vegas","synopsis":"On a trip to Las Vegas, Jay wheels and deals to get a better room, Claire tries to win back the money she lost last year, Phil tries to get into a magician's club, and Cameron chooses a bachelor party over a spa day with Mitchell.","rating":"8.7/10","link":"Modern Family/Modern.Family.S05E18.mp4"},{"season":"S06","img":"Modern Family/videoframe_201506.png","title":"S06E07 - Queer Eyes, Full Hearts","synopsis":"Haley and Andy start spending a lot of time together. Gloria wants Manny to learn Spanish at school instead of French, and a reporter takes more than a passing interest in Cameron and Mitchell's lives.","rating":"8.1/10","link":"Modern Family/Modern.Family.S06E07.mp4"},{"season":"S06","img":"Modern Family/videoframe_330380.png","title":"S06E08 - Three Turkeys","synopsis":"Phil and Luke take over Thanksgiving duties but Claire readies an emergency plan. Jay and Gloria get their holiday plans interrupted and regret not telling anyone. Cameron has to think of a way to get Lily to wear a dress for dinner.","rating":"8.2/10","link":"Modern Family/Modern.Family.S06E08.mp4"},{"season":"S06","img":"Modern Family/videoframe_35813.png","title":"S06E10 - Haley's 21st Birthday","synopsis":"The family takes Haley out to a bar for her 21st birthday, where Claire tries to prove she's not a square, but will anything go wrong?","rating":"8.3/10","link":"Modern Family/Modern.Family.S06E10.mp4"},{"season":"S06","img":"Modern Family/videoframe_63387.png","title":"S06E11 - The Day We Almost Died","synopsis":"While driving out to get breakfast, the Dunphys including Manny have a near death experience causing everyone to reevaluate their lives. Claire resolves to be more fun and less uptight, Haley and Alex agree not to fight anymore, Manny refuses to ever ride in a car again, Luke wants to check off his bucket list, Phil decides to be a take action type of guy and the rest of the family has to bear the brunt of all the new attitudes.","rating":"8.6/10","link":"Modern Family/Modern.Family.S06E11.mp4"},{"season":"S06","img":"Modern Family/videoframe_1011044.png","title":"S06E16 - Connection Lost","synopsis":"Claire is stuck at an airport and trying to digitally track down Haley after an argument.","rating":"9.5/10","link":"Modern Family/Modern.Family.S06E16.mp4"},{"season":"S07","img":"Modern Family/videoframe_12346.png","title":"S07E07 - Phil's Sexy, Sexy House","synopsis":"Haley sneaks into the fancy house Phil is selling for some alone time, but discovers that other people had the same idea. Meanwhile, Jay secretly plans a trip for the family, and Manny tries to use his brother Joe to impress a girl.","rating":"8.2/10","link":"Modern Family/Modern Family 2009 Season 7 Complete 720p WEB-DL x264 [i_c]/Modern Family S07E07 Phil's Sexy, Sexy House.mkv"},{"season": "S07","img": "Modern Family/S7.E9 ∙ White Christmas.jpg","title": "S07E09 - White Christmas","synopsis": "Gloria plans a perfect ‘White Christmas’ at a mountain cabin, but unexpected weather, family drama, Jay’s big business announcement, and Haley–Andy’s secret romance complicate things.","rating": "8.3/10","link": "Modern Family/Modern Family S07E09 White Christmas.mkv"},   {"season": "S07","img": "Modern Family/S7.E16 ∙ The Cover-Up.jpg","title": "S07E16 - The Cover-Up","synopsis": "Phil hides a secret about a new client from Claire, but Claire has her own with her yoga instructor. Jay tries to uncover an online troll’s identity, and Cam has a bike‑riding accident teaching Lily.","rating": "8.0/10","link": "Modern Family/Modern Family S07E16 The Cover-Up.mkv"}, { "season": "S07", "img": "Modern Family/videoframe_12345.png", "title": "S07E21 - Crazy Train", "synopsis": "The family travels by train to Dede's wedding. Phil and Cam help a mystery writer with his book, Jay's comment puts the wedding in jeopardy, Claire helps Mitch write the toast, and Luke and Alex meet possible romantic interests.", "rating": "8.5/10", "link": "Modern Family/Modern Family 2009 Season 7 Complete 720p WEB-DL x264 [i_c]/Modern Family S07E21 Crazy Train.mkv" },   {"season": "S07","img": "Modern Family/S7.E22 ∙ Double Click.jpg","title": "S07E22 - Double Click","synopsis": "Jay struggles as he returns to the job, and Claire must fire an employee. Mitchell and Cam fight over who keeps Lily for the summer. Meanwhile, Phil and the kids struggle with relationships and change.","rating": "8.1/10", "link": "Modern Family/Modern Family S07E22 Double Click.mkv" }, {"season":"S08","img":"Modern Family/videoframe_12347.png","title":"S08E01 - A Tale of Three Cities","synopsis":"The three families will be in three different locations: the Dunphys will be in New York, Jay and Gloria will attend a wedding in Mexico, and Mitchell and Cameron will attend a funeral in Missouri.","rating":"8.4/10","link":"Modern Family/Modern Family 2009 Season 8 Complete 720p AMZN WEBRip x264 [i_c]/Modern Family S08E01 A Tale of Three Cities.mkv"},{"season":"S08","img":"Modern Family/TorrDroid/Modern Family 2009 Season 8 Complete 720p AMZN WEBRip x264 [i_c]/Modern Family S08E08 The Alliance.jpg","title":"S08E08 - The Alliance","synopsis":"Gloria, Phil & Cameron form a secret alliance to help each other out against their Pritchett spouses, but Mitchell begins to suspect. Meanwhile, Haley awkwardly bonds with Rainer Shine's daughter; Luke helps Jay get a petition signature.","rating":"8.4/10","link":"Modern Family/TorrDroid/Modern Family 2009 Season 8 Complete 720p AMZN WEBRip x264 [i_c]/Modern Family S08E08 The Alliance.mkv"},{"season":"S08","img":"Modern Family/videoframe_12348.png","title":"S08E12 - Do You Believe in Magic","synopsis":"Phil calls upon his alter ego to inject some sizzle back into his marriage; Jay shows favoritism in his parenting; Haley and Sal try to stand up to men in their lives.","rating":"8.3/10","link":"Modern Family/Modern Family 2009 Season 8 Complete 720p AMZN WEBRip x264 [i_c]/Modern Family S08E12 Do You Believe in Magic.mkv"},{"season":"S09","img":"Modern Family/videoframe_12349.png","title":"S09E01 - Lake Life","synopsis":"Jay takes the family on a lake house in efforts to make a memories.","rating":"8.0/10","link":"Modern Family/Modern Family Season 9 Complete 720p HDTV x264 [i_c]/Modern Family S09E01 Lake Life.mkv"},{"season":"S09","img":"Modern Family/videoframe_12350.png","title":"S09E07 - Winner Winner Turkey Dinner","synopsis":"Everyone is celebrating their triumph on the thanksgiving while the truth is that all of them cheated.","rating":"7.9/10","link":"Modern Family/Modern Family Season 9 Complete 720p HDTV x264 [i_c]/Modern Family S09E07 Winner Winner Turkey Dinner.mkv"},{"season":"S09","img":"Modern Family/TorrDroid/Modern Family Season 9 Complete 720p HDTV x264 [i_c]/Modern Family S09E09 Tough Love.jpg","title":"S09E09 - Tough Love","synopsis":"Phil and Claire go out of their comfort zone when he goes on a survival camping trip and she has to drive a big rig. Gloria is upset over Manny dating his female professor. Cameron’s detention class gets an undercover cop.","rating":"7.2/10","link":"Modern Family/TorrDroid/Modern Family Season 9 Complete 720p HDTV x264 [i_c]/Modern Family S09E09 Tough Love.mkv"},{"season":"S09","img":"Modern Family/videoframe_12351.png","title":"S09E16 - Wine Weekend","synopsis":"The family go wine tasting and stay in Haley's boss's country house which has one important rule, don't touch the tiara. Meanwhile, Gloria and Mitch are invited to a party at Oprah's house but can't bring anyone else.","rating":"8.1/10","link":"Modern Family/Modern Family Season 9 Complete 720p HDTV x264 [i_c]/Modern Family S09E16 Wine Weekend.mkv"},{"season":"S10","img":"Modern Family/videoframe_12353.png","title":"S10E20 - Can't Elope","synopsis":"Haley and Dylan's plan to quietly elope before the babies are born doesn't go as smoothly as they had hoped; Jay continues to try and get his new business off the ground by courting an Instagram celebrity.","rating":"8.5/10","link":"Modern Family/Modern.Family.SEASON.10.S10.COMPLETE.720p.WEBRip.2CH.x265.HEVC-PSA/Modern.Family.S10E20.Can't.Elope.720p.WEBRip.2CH.x265.HEVC-PSA.mkv"},{"season":"S11","img":"Modern Family/videoframe_12352.png","title":"S11E10 - The Prescott","synopsis":"Alex's company puts her up at a new luxury apartment building with a number of high-profile residents that the family is eager to take advantage of; Phil is on a mission to review the restaurant's famous sliders for his food blog.","rating":"8.6/10","link":"Modern Family/Modern Family S11E10 The Prescott.mkv"}];
        const allEpisodesCorrected = [...new Map(allEpisodes.concat(otherEpisodes).map(item => [item.title, item])).values()];

        let playHoverSound = () => {};
        let currentEpisodeIndex = -1;
        let currentFilteredList = [];
        let clickTimer = null;

        // DOM Elements
        const modalContent = document.getElementById('modal-content');
        const videoPlayer = document.getElementById('modal-video');
        const nextEpisodePrompt = document.getElementById('next-episode-prompt');
        const prevEpisodeBtn = document.getElementById('prev-episode-btn');
        const nextEpisodeBtn = document.getElementById('next-episode-btn');
        const videoContainer = document.getElementById('modal-video-container');

        window.addEventListener('scroll', () => {
            document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 50);
        });

        const handleTimeUpdate = () => {
            const remainingTime = videoPlayer.duration - videoPlayer.currentTime;
            const hasNextEpisode = currentEpisodeIndex < currentFilteredList.length - 1;

            if (hasNextEpisode && !isNaN(videoPlayer.duration) && remainingTime <= 40 && remainingTime > 1) {
                nextEpisodePrompt.style.display = 'block';
            } else {
                nextEpisodePrompt.style.display = 'none';
            }
            
            const edgeNavIsActive = videoPlayer.currentTime < 10;
            const hoverZone = document.querySelector('.video-overlay-controls:hover');
            
            if(edgeNavIsActive && hoverZone) {
                prevEpisodeBtn.style.opacity = '1';
                nextEpisodeBtn.style.opacity = '1';
                prevEpisodeBtn.style.pointerEvents = 'all';
                nextEpisodeBtn.style.pointerEvents = 'all';
            } else {
                 prevEpisodeBtn.style.opacity = '0';
                 nextEpisodeBtn.style.opacity = '0';
                 prevEpisodeBtn.style.pointerEvents = 'none';
                 nextEpisodeBtn.style.pointerEvents = 'none';
            }
        };
        
        function renderEpisodes() {
            const container = document.getElementById('episodes-container');
            const season = document.getElementById('season-select').value;
            const searchTerm = document.getElementById('search-bar').value.toLowerCase();
            let sourceList = (season === 'all') ? allEpisodesCorrected : allEpisodesCorrected.filter(ep => ep.season === season);
            currentFilteredList = searchTerm ? 
                sourceList.filter(ep => ep.title.toLowerCase().includes(searchTerm) || ep.synopsis.toLowerCase().includes(searchTerm))
                : sourceList;
            
            container.innerHTML = '';
            if (currentFilteredList.length === 0) {
                container.innerHTML = '<p>No episodes found matching your criteria.</p>';
                return;
            }

            let topRatedEpisode = currentFilteredList.reduce((prev, current) => (parseFloat(prev.rating) > parseFloat(current.rating)) ? prev : current, {rating: '0/10'});
            currentFilteredList.forEach((ep, index) => {
                const episodeElement = document.createElement('div');
                episodeElement.classList.add('episode');
                let badge = (ep.title === topRatedEpisode.title) ? '<div class="top-rated-badge">Top Rated</div>' : '';
                episodeElement.innerHTML = `
                    ${badge}
                    <div class="image-container">
                        <img src="${ep.img}" alt="${ep.title}" onerror="this.onerror=null;this.src='modern-family-logo-A3711BC6FA-seeklogo.com.png';">
                        <div class="play-icon">▶</div>
                    </div>
                    <div class="episode-info">
                        <div class="title">${ep.title}</div>
                        <div class="rating">IMDB: ★ ${ep.rating}</div>
                        <div class="synopsis">${ep.synopsis}</div>
                    </div>`;
                episodeElement.addEventListener('click', () => showDetails(currentFilteredList, index));
                episodeElement.addEventListener('mouseenter', playHoverSound);
                container.appendChild(episodeElement);
            });
        }

        function showDetails(episodeList, index) {
            currentFilteredList = episodeList;
            currentEpisodeIndex = index;
            const episode = episodeList[index];
            const modal = document.getElementById('episode-modal');
            
            nextEpisodePrompt.style.display = 'none';
            document.getElementById('modal-title').textContent = episode.title;
            document.getElementById('modal-synopsis').textContent = episode.synopsis;
            document.getElementById('modal-rating-value').textContent = episode.rating;
            document.getElementById('modal-video-source').src = episode.link;
            
            videoPlayer.load();
            videoPlayer.play().catch(e => console.warn("Autoplay was prevented by the browser."));
            
            currentEpisodeIndex > 0 ? prevEpisodeBtn.classList.remove('disabled') : prevEpisodeBtn.classList.add('disabled');
            currentEpisodeIndex < currentFilteredList.length - 1 ? nextEpisodeBtn.classList.remove('disabled') : nextEpisodeBtn.classList.add('disabled');

            modal.style.display = 'flex';
        }
        
        const playNextEpisode = () => (currentEpisodeIndex < currentFilteredList.length - 1) ? showDetails(currentFilteredList, currentEpisodeIndex + 1) : closeModal();
        const playPreviousEpisode = () => (currentEpisodeIndex > 0) ? showDetails(currentFilteredList, currentEpisodeIndex - 1) : null;

        function closeModal() {
            const modal = document.getElementById('episode-modal');
            if (document.fullscreenElement) document.exitFullscreen();
            modal.style.display = 'none';
            videoPlayer.pause();
            document.getElementById('modal-video-source').src = "";
        }
        
        const togglePlayPause = () => {
            if (videoPlayer.paused) videoPlayer.play();
            else videoPlayer.pause();
        };

        const toggleFullScreen = () => {
            if (!document.fullscreenElement) {
                modalContent.requestFullscreen().catch(err => alert(`Error: ${err.message}`));
            } else {
                document.exitFullscreen();
            }
        };

        function handlePlayerClick(action) {
            clearTimeout(clickTimer);
            clickTimer = setTimeout(() => {
                action();
                clickTimer = null;
            }, 200);
        }

        function handlePlayerDblClick() {
            clearTimeout(clickTimer);
            clickTimer = null;
            toggleFullScreen();
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            const hoverSound = document.getElementById('hover-sound');
            playHoverSound = () => { if (hoverSound) { hoverSound.currentTime = 0; hoverSound.play().catch(e => {}); } };
            
            const interactiveElements = document.querySelectorAll('button, .dropdown-content a, .hamburger img, #season-select, #search-bar');
            interactiveElements.forEach(elem => elem.addEventListener('mouseenter', playHoverSound));
            
            document.querySelector('.close').addEventListener('click', closeModal);
            window.addEventListener('click', event => { if (event.target === document.getElementById('episode-modal')) closeModal(); });
            
            videoPlayer.addEventListener('ended', playNextEpisode);
            videoPlayer.addEventListener('timeupdate', handleTimeUpdate);
            
            // --- Player Click/DblClick Listeners ---
            document.querySelector('.click-zone.left').addEventListener('click', () => handlePlayerClick(() => videoPlayer.currentTime -= 10));
            document.querySelector('.click-zone.center').addEventListener('click', () => handlePlayerClick(togglePlayPause));
            document.querySelector('.click-zone.right').addEventListener('click', () => handlePlayerClick(() => videoPlayer.currentTime += 10));
            
            videoContainer.addEventListener('dblclick', handlePlayerDblClick);
            
            prevEpisodeBtn.addEventListener('click', (e) => { e.stopPropagation(); playPreviousEpisode(); });
            nextEpisodeBtn.addEventListener('click', (e) => { e.stopPropagation(); playNextEpisode(); });
            nextEpisodePrompt.addEventListener('click', playNextEpisode);

            document.addEventListener('keydown', (e) => {
                if (document.getElementById('episode-modal').style.display !== 'flex' || e.target.tagName === 'INPUT') return;
                
                if (e.key === ' ' || e.key.includes('Arrow') || e.key.toLowerCase() === 'f') e.preventDefault();

                switch (e.key.toLowerCase()) {
                    case ' ': togglePlayPause(); break;
                    case 'arrowright': case 'l': videoPlayer.currentTime += 10; break;
                    case 'arrowleft': case 'j': videoPlayer.currentTime -= 10; break;
                    case 'f': toggleFullScreen(); break;
                }
            });

            document.getElementById('season-select').addEventListener('change', renderEpisodes);
            document.getElementById('search-bar').addEventListener('input', renderEpisodes);
            document.querySelector('.btn-play').addEventListener('click', () => {
                 if (currentFilteredList.length > 0) showDetails(currentFilteredList, 0);
            });
            
            renderEpisodes();
        });
    </script>
</body>
</html>