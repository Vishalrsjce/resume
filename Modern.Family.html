<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Family - All Seasons</title>
    <style>
        :root {
            --primary-red: #e50914;
            --background-light: #f4f4f4;
            --card-light: #ffffff;
            --text-dark: #1c1c1c;
            --text-secondary: #555;
            --border-light: #ddd;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: var(--background-light); color: var(--text-dark); }
        .navbar { display: flex; justify-content: space-between; align-items: center; background: linear-gradient(to bottom, rgba(0,0,0,0.6) 10%, rgba(0,0,0,0)); padding: 20px 50px; color: white; width: 100%; position: fixed; top: 0; z-index: 1001; transition: background-color 0.4s; }
        .navbar.scrolled { background-color: #333; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .navbar-logo img {
            height: 35px;
            width: auto;
            vertical-align: middle;
        }
        .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .navbar .welcome { font-weight: bold; }
        .navbar .hamburger { position: relative; }
        .navbar .hamburger img { width: 35px; height: 35px; cursor: pointer; border-radius: 4px; }
        .dropdown-content { display: none; position: absolute; right: 0; background-color: var(--card-light); min-width: 180px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1; border: 1px solid var(--border-light); }
        .dropdown-content a { color: var(--text-dark); padding: 12px 16px; text-decoration: none; display: block; font-size: 0.9em; }
        .dropdown-content a:hover { background-color: #e9e9e9; }
        .hamburger:hover .dropdown-content { display: block; }

        .hero-container { 
            min-height: 95vh; 
            width: 100%; 
            position: relative; 
            background-image: linear-gradient(to right, rgba(244, 244, 244, 1) 25%, rgba(244, 244, 244, 0.7) 50%, rgba(244, 244, 244, 0) 100%), 
                              linear-gradient(to top, var(--background-light) 5%, rgba(244, 244, 244, 0) 25%), 
                              url('modern-family-dvd-poster-cover-qlhbavon5k0kmbhn.jpg'); 
            background-size: cover; 
            background-position: center top; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            padding: 100px 50px 50px 50px; 
        }

        .hero-text-content { max-width: 55%; z-index: 10; }

        .hero-text-content .logo { 
            width: 300px;
            margin-bottom: 20px; 
        }

        .hero-text-content h1 { font-size: 3.5em; margin-bottom: 15px; }
        .hero-text-content .meta-info { color: var(--text-secondary); margin-bottom: 20px; font-size: 1.1em; font-weight: bold; }
        .hero-text-content p { font-size: 1.2em; line-height: 1.5; margin-bottom: 25px; max-width: 600px; }
        .hero-buttons button { padding: 12px 25px; font-size: 1.1em; border-radius: 5px; border: none; margin-right: 15px; cursor: pointer; font-weight: bold; display: inline-flex; align-items: center; justify-content: center; transition: all 0.3s ease; }
        .btn-play { background-color: var(--primary-red); color: var(--card-light); }
        .btn-play:hover { background-color: #c40812; transform: scale(1.05); }
        .btn-info { background-color: rgba(109,109,110,0.7); color: var(--card-light); }
        .btn-info:hover { background-color: rgba(109,109,110,0.9); transform: scale(1.05); }
        .main-content { padding: 20px 50px; position: relative; z-index: 12; background-color: var(--background-light); margin-top: -80px; }
        .filter-row { background-color: var(--card-light); padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 25px; }
        .filter-row h3 { font-size: 1.6em; font-weight: bold; margin-bottom: 15px; }
        .filter-controls { display: flex; gap: 20px; align-items: center; flex-wrap: wrap; }
        .season-selector, .search-bar { padding: 12px; font-size: 1.1em; border-radius: 5px; border: 1px solid var(--border-light); background-color: #f9f9f9; color: var(--text-dark); }
        .search-bar { flex-grow: 1; }
        .episodes-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; width: 100%; margin-top: 20px; }
        .episode { background-color: var(--card-light); border-radius: 8px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer; position: relative; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .episode:hover { transform: scale(1.05); z-index: 20; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .episode .image-container { width: 100%; padding-top: 56.25%; position: relative; background-color: #e0e0e0; }
        .episode img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 4em; color: rgba(255,255,255,0.9); text-shadow: 0 0 15px rgba(0,0,0,0.5); opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .episode:hover .play-icon { opacity: 1; }
        .episode-info { padding: 15px; }
        .episode .title { font-weight: bold; font-size: 1.1em; color: var(--text-dark); margin-bottom: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .episode .synopsis { font-size: 0.9em; color: var(--text-secondary); line-height: 1.4; height: 3.8em; overflow: hidden; }
        .episode .rating { font-weight: bold; color: #28a745; margin-top: 10px; font-size: 0.9em; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.85); align-items: center; justify-content: center; }
        .modal-content { background-color: var(--card-light); color: var(--text-dark); margin: auto; padding: 0; width: 90%; max-width: 900px; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.7); position: relative; overflow: hidden; }
        .modal-video-container { position: relative; background-color: #000; cursor: pointer; }
        #modal-video { width: 100%; height: auto; display: block; }
        .close { color: var(--text-dark); position: absolute; top: 15px; right: 20px; font-size: 35px; font-weight: bold; background-color: rgba(255,255,255,0.7); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; line-height: 1; z-index: 100; cursor: pointer; transition: all 0.2s; }
        .close:hover, .close:focus { background-color: #fff; transform: scale(1.1); }
        .modal-info { padding: 25px 30px; }
        #modal-title { font-size: 1.8em; margin-bottom: 15px; color: var(--primary-red); }
        #modal-synopsis { color: var(--text-secondary); margin-bottom: 15px; line-height: 1.6; }
        #modal-rating { font-weight: bold; }
        .video-overlay-controls { position: absolute; top: 0; left: 0; right: 0; bottom: 60px; z-index: 21; }
        .click-zone { position: absolute; top: 0; height: 100%; z-index: 22; }
        .click-zone.left { left: 0; width: 30%; }
        .click-zone.center { left: 30%; width: 40%; }
        .click-zone.right { right: 0; width: 30%; }
        .edge-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(20,20,20,0.8); color: #fff; padding: 10px 15px; border-radius: 5px; font-weight: bold; font-size: 1.1em; opacity: 0; transition: opacity 0.3s; z-index: 23; pointer-events: none; }
        .video-overlay-controls:hover .edge-nav { opacity: 1; pointer-events: auto; }
        .edge-nav.prev { left: 20px; }
        .edge-nav.next { right: 20px; }
        .edge-nav.disabled { opacity: 0 !important; pointer-events: none !important; }
        #next-episode-prompt { display: none; position: absolute; bottom: 80px; right: 20px; z-index: 100; background-color: rgba(255, 255, 255, 0.95); color: var(--text-dark); border: 2px solid var(--primary-red); padding: 12px 25px; border-radius: 5px; font-size: 1em; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        #next-episode-prompt:hover { background-color: var(--primary-red); color: white; border-color: var(--primary-red); transform: scale(1.05); }
        footer { text-align: center; color: var(--text-secondary); margin-top: 50px; padding-bottom: 20px; }
    </style>
</head>
<body>
    <audio id="hover-sound" src="ui-pop-sound-316482.mp3" preload="auto"></audio>
    <div class="navbar" id="navbar">
        <a href="netflix.html" class="navbar-logo"><img src="netflix-mobile-application-logo-free-png.webp" alt="Site Logo"></a>
        <div class="navbar-right">
            <div class="welcome">Welcome, Vishal R</div>
            <div class="hamburger">
                <img src="download.png" alt="Menu">
                <div class="dropdown-content">
                    <a href="profile.html">Profile</a>
                    <a href="logout.html">Logout</a>
                    <a href="home.html">Home</a>
                    <a href="GALLERY.HTML">Stream</a>
                    <a href="about.html">About</a>
                </div>
            </div>
        </div>
    </div>
    <div class="hero-container">
        <div class="hero-text-content">
            <img src="modern-family-logo-A3711BC6FA-seeklogo.com.png" alt="Modern Family Logo" class="logo">
            <h1>Modern Family</h1>
            <div class="meta-info">2009 | U/A 13+ | 11 Seasons | Sitcom</div>
            <p>Follows the lives of three diverse family set-ups in suburban Los Angeles, linked by patriarch Jay Pritchett.</p>
            <div class="hero-buttons">
                <button class="btn-play">▶ Play First Episode</button>
                <button class="btn-info">ⓘ More Info</button>
            </div>
        </div>
    </div>
    <div class="main-content">
        <div class="filter-row">
            <h3>All Episodes</h3>
            <div class="filter-controls">
                <select id="season-select" class="season-selector">
                    <option value="all">All Seasons</option>
                    <option value="S01">Season 1</option>
                    <option value="S02">Season 2</option>
                    <option value="S03">Season 3</option>
                    <option value="S04">Season 4</option>
                    <option value="S05">Season 5</option>
                    <option value="S06">Season 6</option>
                    <option value="S07">Season 7</option>
                    <option value="S08">Season 8</option>
                    <option value="S09">Season 9</option>
                    <option value="S10">Season 10</option>
                    <option value="S11">Season 11</option>
                </select>
                <input type="text" id="search-bar" class="search-bar" placeholder="Search episodes...">
            </div>
        </div>
        <div id="episodes-container" class="episodes-grid"></div>
    </div>
    <footer><p>© 2024 VR1 Site. All rights reserved.</p></footer>
    <div id="episode-modal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <div class="modal-video-container">
                <video id="modal-video" controls><source id="modal-video-source" src="" type="video/mp4"></video>
                <div class="video-overlay-controls">
                    <div class="click-zone left"></div>
                    <div class="click-zone center"></div>
                    <div class="click-zone right"></div>
                    <div class="edge-nav prev" id="prev-episode-btn">« Previous</div>
                    <div class="edge-nav next" id="next-episode-btn">Next »</div>
                </div>
                <button id="next-episode-prompt">Play Next Episode</button>
            </div>
            <div class="modal-info">
                <h2 id="modal-title">Episode Title</h2>
                <p id="modal-synopsis">Episode Synopsis</p>
                <p id="modal-rating">IMDB: ★ <span id="modal-rating-value"></span></p>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
           const episodes = [
    {
        season: 'S01',
        img: 'Modern Family/videoframe_313726.png',
        title: 'S01E03 - The Bicycle Thief',
        synopsis: 'Phil is determined to help his son prove he is responsible enough to own a bike. Jay and Manny\'s relationship is strained when Jay tries to teach Manny to ride a bike.',
        rating: '8.3/10',
        link: '404.mp4'
    },
    {
        season: 'S01',
        img: 'Modern Family/videoframe_22109.png',
        title: 'S01E13 - Fifteen Percent',
        synopsis: 'Mitchell plants the seed that Jay\'s friend might be gay, causing confusion. Manny accidentally tells Gloria that she is the dog butler.',
        rating: '8.1/10',
        link: '404.mp4'
    },
    {
        season: 'S01',
        img: 'Modern Family/videoframe_121935.png',
        title: 'S01E15 - My Funky Valentine',
        synopsis: 'Phil and Claire decide to role-play for Valentine\'s Day, but things don\'t go as planned. Jay and Gloria\'s plans for a romantic evening are ruined by Gloria\'s mother.',
        rating: '8.4/10',
        link: '404.mp4'
    },
    {
        season: 'S01',
        img: 'Modern Family/videoframe_93701.png',
        title: 'S01E17 - Truth Be Told',
        synopsis: 'Phil reconnects with an old girlfriend through Facebook, which causes tension between him and Claire. Mitchell and Cameron babysit Lily\'s classmate, who turns out to be a bit of a terror.',
        rating: '8.0/10',
        link: '404.mp4'
    },
    {
        season: 'S01',
        img: 'Modern Family/videoframe_36964.png', 
        title: 'S01E23 - Hawaii',
        synopsis: 'Jay\'s plans for a relaxing vacation are derailed by the family\'s various problems. Phil tries to make up for the honeymoon he and Claire never had.',
        rating: '8.5/10',
        link: '404.mp4'
    },
    {
        season: 'S01',
        img: 'Modern Family/videoframe_1216543.png',
        title: 'S01E24 - Family Portrait',
        synopsis: 'Claire tries to arrange a perfect family portrait, but her plans are thwarted by the family\'s various antics. Jay tries to bond with Manny.',
        rating: '8.3/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_1067385.png',
        title: 'S02E02 - The Kiss',
        synopsis: 'Claire is suspicious when Phil\'s father arrives in town for an unexpected visit; Manny bonds with Jay over a little morning sickness.',
        rating: '8.2/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_543903.png',
        title: 'S02E05 - Unplugged',
        synopsis: 'Luke and Manny have their first school dance; Jay and Phil take Luke and Manny on a mall run that becomes quite stressful; Mitch and Cam learn that Lily is biting other kids on the playground.',
        rating: '8.1/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_897412.png',
        title: 'S02E06 - Halloween',
        synopsis: 'Claire loves Halloween and is gearing up for her annual haunted house; but the rest of the family is not as enthusiastic.',
        rating: '8.5/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_199900.png',
        title: 'S02E11 - Slow Down Your Neighbors',
        synopsis: 'Claire becomes a determined neighborhood vigilante hoping to catch and stop a menacing car that speeds though their streets; Phil is busy trying to land a big listing with a difficult client.',
        rating: '8.3/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_156156.png',
        title: 'S02E13 - Caught in the Act',
        synopsis: 'Phil and Claire try to have a kid-free anniversary, but things go awry when they are caught in a compromising position by their children.',
        rating: '8.8/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_580304.png',
        title: 'S02E14 - Bixby\'s Back',
        synopsis: 'Phil and Claire celebrate Valentine\'s Day once again with their alter egos, Clive and Juliana. Mitchell and Cameron realize they aren\'t as young as they used to be.',
        rating: '8.2/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_1040875.png',
        title: 'S02E18 - Boys\' Night',
        synopsis: 'Phil and Claire have some trepidation when they find out that Luke has befriended their crotchety old neighbor; Jay\'s attempt to avoid sitting through a symphony concert with Gloria and Manny lands him in the middle of Mitchell and Cameron\'s "boys\' night out."',
        rating: '8.2/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_368215.png',
        title: 'S02E19 - The Musical Man',
        synopsis: 'Cameron is overzealous in his planning of the spring musical performance at Luke and Manny\'s school; Jay\'s brother visits.',
        rating: '8.0/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_1206285.png',
        title: 'S02E20 - Someone to Watch Over Lily',
        synopsis: 'Claire and Mitchell try to spare Jay\'s feelings; Mitchell tells Gloria of his legal expertise; Phil rethinks his career.',
        rating: '8.1/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_593112.png',
        title: 'S02E21 - Mother\'s Day',
        synopsis: 'Claire and Gloria\'s Mother\'s Day excursion with the kids ends up with surprising results; Phil and Jay bond over their mutual dream of owning a Clive Bixby costume.',
        rating: '8.3/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_878411.png',
        title: 'S02E22 - Good Cop Bad Dog',
        synopsis: 'Phil and Claire switch parenting duties to the kids\' chagrin; Mitchell takes on a freelance job that has Cameron worried about his future.',
        rating: '8.4/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_493606.png',
        title: 'S02E23 - See You Next Fall',
        synopsis: 'The family gathers at Jay\'s for Alex\'s graduation; Cameron is upset about losing his job; Mitchell helps Gloria with legal problems.',
        rating: '8.5/10',
        link: '404.mp4'
    },
    {
        season: 'S02',
        img: 'Modern Family/videoframe_628983.png',
        title: 'S02E24 - The One That Got Away',
        synopsis: 'Jay wants nothing more than a quiet birthday, but the family tries to make it special. Chaos ensues, leading to an unexpected surprise.',
        rating: '8.6/10',
        link: '404.mp4'
    },
    {
        season: 'S03',
        img: 'Modern Family/videoframe_37626.png',
        title: 'S03E02 - When Good Kids Go Bad',
        synopsis: 'Lily\'s gymnastics class leads to Mitchell and Cameron learning a valuable lesson about parenting. Jay tries to bond with Gloria\'s family.',
        rating: '8.3/10',
        link: '404.mp4'
    },
    {
        season: 'S03',
        img: 'Modern Family/videoframe_95383.png',
        title: 'S03E06 - Go Bullfrogs!',
        synopsis: 'Phil takes Haley on a tour of his alma mater, leading to some unexpected revelations. Gloria wants to surprise Jay with a night out.',
        rating: '8.1/10',
        link: '404.mp4'
    },
    {
        season: 'S03',
        img: 'Modern Family/videoframe_804015.png',
        title: 'S03E08 - After the Fire',
        synopsis: 'After a neighbor\'s house burns down, the family decides to help by organizing a community yard sale, leading to some surprising discoveries.',
        rating: '8.0/10',
        link: '404.mp4'
    },
    {
        season: 'S03',
        img: 'Modern Family/videoframe_914514.png',
        title: 'S03E13 - Little Bo Bleep',
        synopsis: 'The family prepares for Lily\'s flower girl gig at a wedding, but she has a few choice words during the rehearsal. Claire runs for city council.',
        rating: '8.5/10',
        link: '404.mp4'
    },
    {
        season: 'S04',
        img: 'Modern Family/videoframe_1148721.png',
        title: 'S04E02 - Schooled',
        synopsis: 'Phil and Claire drop Haley off at college; Manny makes Gloria and Jay take a class; Lily gets into a tussle on her first day of kindergarten.',
        rating: '8.2/10',
        link: '404.mp4'
    },
    {
        season: 'S04',
        img: 'Modern Family/videoframe_544197.png',
        title: 'S04E07 - Arrested',
        synopsis: 'Phil and Claire get the dreaded late-night call that Haley has been arrested for under-aged drinking.',
        rating: '8.1/10',
        link: '404.mp4'
    },
    {
        season: 'S04',
        img: 'Modern Family/videoframe_557431.png',
        title: 'S04E08 - Mistery Date',
        synopsis: 'Claire and Phil plan a kid-free week; Jay and Gloria are looking forward to the time alone.',
        rating: '8.0/10',
        link: '404.mp4'
    },
    {
        season: 'S04',
        img: 'Modern Family/videoframe_1174873.png',
        title: 'S04E13 - Fulgencio',
        synopsis: 'Gloria\'s mom and sister visit, creating tension with Jay; Phil and Claire help Mitch and Cam when they get a little too stressed out.',
        rating: '8.3/10',
        link: '404.mp4'
    },
    {
        season: 'S05',
        img: 'Modern Family/videoframe_1093189.png',
        title: 'S05E12 - Under Pressure',
        synopsis: 'The family deals with their own issues as Alex gets ready for a big speech. Claire tries to stay calm during a school event.',
        rating: '8.5/10',
        link: '404.mp4'
    },
    {
        season: 'S05',
        img: 'Modern Family/videoframe_315901.png',
        title: 'S05E14 - iSpy',
        synopsis: 'Claire and Phil spy on the kids, Jay misjudges Gloria, and Mitchell and Cameron have a big fight.',
        rating: '8.4/10',
        link: '404.mp4'
    },
    {
        season: 'S05',
        img: 'Modern Family/videoframe_1200960.png',
        title: 'S05E18 - Las Vegas',
        synopsis: 'Jay, Gloria, and the rest of the family head to Las Vegas for a weekend of fun, but things quickly get out of hand.',
        rating: '8.7/10',
        link: '404.mp4'
    },
    {
        season: 'S06',
        img: 'Modern Family/videoframe_201506.png',
        title: 'S06E07 - Queer Eyes, Full Hearts',
        synopsis: 'Phil and Claire don\'t know if they should be happy or sad that Haley and Andy are getting along so well.',
        rating: '8.1/10',
        link: '404.mp4'
    },
    {
        season: 'S06',
        img: 'Modern Family/videoframe_330380.png',
        title: 'S06E08 - Three Turkeys',
        synopsis: 'Phil and Luke prepare Thanksgiving dinner, but Claire tries to keep it low-key.',
        rating: '8.2/10',
        link: '404.mp4'
    },
    {
        season: 'S06',
        img: 'Modern Family/videoframe_35813.png',
        title: 'S06E10 - Haley\'s 21st Birthday',
        synopsis: 'The family takes Haley out to a bar for her 21st birthday, where Claire tries to prove she\'s not a square.',
        rating: '8.3/10',
        link: '404.mp4'
    },
    {
        season: 'S06',
        img: 'Modern Family/videoframe_63387.png',
        title: 'S06E11 - The Day We Almost Died',
        synopsis: 'After a near-death experience, the family tries to make the most of their lives, but it doesn\'t go as planned.',
        rating: '8.6/10',
        link: '404.mp4'
    },
    {
        season: 'S06',
        img: 'Modern Family/videoframe_1011044.png',
        title: 'S06E16 - Connection Lost',
        synopsis: 'Claire\'s computer becomes the hub of all the family\'s activities when it appears that Haley has run off with a mysterious stranger.',
        rating: '9.5/10',
        link: '404.mp4'
    },
    {
        season: 'S06',
        img: 'Modern Family/videoframe_50279.png',
        title: 'S06E24 - American Skyper',
        synopsis: 'The family goes on a houseboat vacation at Jay\'s behest; Mitch and Cam join Sal and her family; Claire is upset to see that Alex may be more interested in Ben.',
        rating: '8.7/10',
        link: '404.mp4'
    }
];

            let currentFilteredEpisodes = [], currentEpisodeIndex = -1;
            const elements = {
                navbar: document.getElementById('navbar'),
                container: document.getElementById('episodes-container'),
                searchBar: document.getElementById('search-bar'),
                seasonSelect: document.getElementById('season-select'),
                hoverSound: document.getElementById('hover-sound'),
                modal: document.getElementById('episode-modal'),
                modalVideo: document.getElementById('modal-video'),
                modalVideoSource: document.getElementById('modal-video-source'),
                modalCloseBtn: document.querySelector('.close'),
                nextEpisodePrompt: document.getElementById('next-episode-prompt'),
                centerClickZone: document.querySelector('.click-zone.center'),
                leftClickZone: document.querySelector('.click-zone.left'),
                rightClickZone: document.querySelector('.click-zone.right'),
                prevEpisodeBtn: document.getElementById('prev-episode-btn'),
                nextEpisodeBtn: document.getElementById('next-episode-btn')
            };
            function renderEpisodes() {
                const filterText = elements.searchBar.value.toLowerCase();
                const selectedSeason = elements.seasonSelect.value;
                elements.container.innerHTML = '';
                currentFilteredEpisodes = allEpisodes.filter(ep => (selectedSeason === 'all' || ep.season === selectedSeason) && (ep.title.toLowerCase().includes(filterText) || ep.synopsis.toLowerCase().includes(filterText)));
                if (currentFilteredEpisodes.length === 0) {
                    elements.container.innerHTML = '<p>No episodes found matching your criteria.</p>';
                    return;
                }
                currentFilteredEpisodes.forEach((ep, index) => {
                    const episodeElement = document.createElement('div');
                    episodeElement.className = 'episode';
                    episodeElement.dataset.index = index;
                    episodeElement.innerHTML = `<div class="image-container"><img src="${ep.img}" alt="${ep.title}" loading="lazy" onerror="this.onerror=null;this.src='modern-family-logo-A3711BC6FA-seeklogo.com.png';"><div class="play-icon">▶</div></div><div class="episode-info"><div class="title">${ep.title}</div><div class="synopsis">${ep.synopsis}</div><div class="rating">IMDB: ★ ${ep.rating}</div></div>`;
                    episodeElement.addEventListener('click', () => showDetails(index));
                    episodeElement.addEventListener('mouseenter', () => { elements.hoverSound.currentTime = 0; elements.hoverSound.play().catch(e => {}); });
                    elements.container.appendChild(episodeElement);
                });
            }
            function showDetails(index) {
                if (index < 0 || index >= currentFilteredEpisodes.length) return;
                currentEpisodeIndex = index;
                const episode = currentFilteredEpisodes[index];
                document.getElementById('modal-title').textContent = episode.title;
                document.getElementById('modal-synopsis').textContent = episode.synopsis;
                document.getElementById('modal-rating-value').textContent = episode.rating;
                elements.modalVideoSource.src = encodeURI(episode.link);
                elements.modalVideo.load();
                elements.modalVideo.play().catch(e => console.error("Video play failed:", e));
                elements.modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                updateNavButtons();
            }
            function updateNavButtons() {
                elements.prevEpisodeBtn.classList.toggle('disabled', currentEpisodeIndex <= 0);
                elements.nextEpisodeBtn.classList.toggle('disabled', currentEpisodeIndex >= currentFilteredEpisodes.length - 1);
            }
            function closeModal() {
                elements.modal.style.display = 'none';
                elements.modalVideo.pause();
                elements.modalVideoSource.src = "";
                document.body.style.overflow = 'auto';
                elements.nextEpisodePrompt.style.display = 'none';
            }
            elements.searchBar.addEventListener('input', renderEpisodes);
            elements.seasonSelect.addEventListener('change', renderEpisodes);
            elements.modalCloseBtn.addEventListener('click', closeModal);
            window.addEventListener('keydown', e => (e.key === 'Escape' && elements.modal.style.display === 'flex') && closeModal());
            window.addEventListener('scroll', () => elements.navbar.classList.toggle('scrolled', window.scrollY > 50));
            elements.centerClickZone.addEventListener('click', () => elements.modalVideo.paused ? elements.modalVideo.play() : elements.modalVideo.pause());
            elements.leftClickZone.addEventListener('click', () => elements.modalVideo.currentTime -= 10);
            elements.rightClickZone.addEventListener('click', () => elements.modalVideo.currentTime += 10);
            elements.prevEpisodeBtn.addEventListener('click', e => { e.stopPropagation(); if (currentEpisodeIndex > 0) showDetails(currentEpisodeIndex - 1); });
            elements.nextEpisodeBtn.addEventListener('click', e => { e.stopPropagation(); if (currentEpisodeIndex < currentFilteredEpisodes.length - 1) showDetails(currentEpisodeIndex + 1); });
            elements.modalVideo.addEventListener('timeupdate', () => {
                const timeLeft = elements.modalVideo.duration - elements.modalVideo.currentTime;
                elements.nextEpisodePrompt.style.display = (timeLeft < 30 && timeLeft > 0 && currentEpisodeIndex < currentFilteredEpisodes.length - 1) ? 'block' : 'none';
            });
            elements.modalVideo.addEventListener('ended', () => { if (currentEpisodeIndex < currentFilteredEpisodes.length - 1) { showDetails(currentEpisodeIndex + 1); } else { closeModal(); } });
            elements.nextEpisodePrompt.addEventListener('click', () => { if (currentEpisodeIndex < currentFilteredEpisodes.length - 1) showDetails(currentEpisodeIndex + 1); });
            document.querySelector('.btn-play').addEventListener('click', () => { renderEpisodes(); if (currentFilteredEpisodes.length > 0) showDetails(0); });
            document.querySelectorAll('.dropdown-content a, .btn-info').forEach(el => { el.addEventListener('mouseenter', () => { elements.hoverSound.currentTime = 0; elements.hoverSound.play().catch(e => {}); }); });
            renderEpisodes();
        });
    </script>
</body>
</html>
